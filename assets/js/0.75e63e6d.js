(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(t,s,e){"use strict";e.r(s);var a=e(0),i=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[e("p"),t._m(0),t._m(1),e("p",[t._v("wepy诞生之初小程序还没有原生自定义组件(虽然有了也未必怎样), 其组件体系是完全自己实现的, 组件wxml直接写到页面或父组件wxml, 绑定相应的数据和事件.\n坑点如下:")]),t._m(2),t._m(3),t._m(4),e("p",[t._v("事件的模仿感觉比较糟糕, 魔改的痕迹明显.\n坑点如下:")]),e("ul",[e("li",[t._v("挺不人性化的事件语法. 组件里emit出来的事件外部在捕获时一定要加.user修饰符. 事件既可以在构造器的events里面声明同名函数, 也可以在标签上绑定methods里声明的处理函数.")]),e("li",[t._v("自定义参数十二分蛋疼. 记得有一次我要额外传个布尔值, 但怎么写都获取不到, 最后成功的语法好像是这样写的"),e("code",[t._v('@tap="handleTap(_, '+t._s(!0)+')"')]),t._v(". 没错, 虽然双大括号里理论上来说能写true和false, 但实践下来只能这样写能拿到正确的值. 只有别问我前面那个参数是个啥玩意, 我只知道那地方写什么都能获取到原事件. 按它官方手册上写的方式...反正我是没成功.")]),t._m(5)]),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),t._m(33),t._m(34),t._m(35)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"wepy的坑点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wepy的坑点","aria-hidden":"true"}},[this._v("#")]),this._v(" wepy的坑点")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"蛋疼的组件体系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#蛋疼的组件体系","aria-hidden":"true"}},[this._v("#")]),this._v(" 蛋疼的组件体系")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("一个页面内声明为同名的组件是同一个实例, 共享一切. 意味着复用组件必须用不同的名字. 在实例对象下可以看到组件的变量名为"),e("code",[t._v("$$组件名$$变量名")])]),e("li",[t._v("循环渲染需要使用自造的repeat标签及其语法, 才能勉强做到将data分离, 但computed依然是所有同名组件实例共用的, 其值为最后一次计算结果.")]),e("li",[t._v("因为组件根本就是嵌入父层统一渲染的, 所以css scope什么的, 自己通过类名去实现吧...")]),e("li",[t._v("辣鸡的传参:\n"),e("ul",[e("li",[t._v("传参如果要穿对象只能直接传对象, 而不能传对象的子对象! 不能有任何运算包括点操作符和"),e("code",[t._v("[]")]),t._v("! 非循环渲染情况下还可以通过computed处理一下, 循环中这种情况基本无解, 只能再造一个新数组.")]),e("li",[t._v("奇怪的绑定方式, "),e("code",[t._v(".sync")]),t._v("和"),e("code",[t._v("twoWay: true")]),t._v(", 很鸡肋的存在.")]),e("li",[t._v("这里动态传参语法仿照vue使用:prop, 但由于并没有vue里最常用的:class和:style的实现, 所以其实我常常压根想不起来这里居然是用冒号.")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("mpvue的自定义组件")]),s("ul",[s("li",[this._v("也未使用原生自定义组件, 而是template("),s("a",{attrs:{href:"https://github.com/Meituan-Dianping/mpvue/issues/305",target:"_blank",rel:"noopener noreferrer"}},[this._v("#305")]),this._v("), 所以也无法在组件外层绑定class或事件.")]),s("li",[this._v("没有wepy的传参和computed这些问题. css scope也有.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"事件体系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件体系","aria-hidden":"true"}},[this._v("#")]),this._v(" 事件体系")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("作者似乎对原生事件的捕获和阻止冒泡有啥"),s("a",{attrs:{href:"https://tencent.github.io/wepy/document.html#/?id=%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[this._v("误解")]),this._v(", .stop修饰符绑定catch事件, 作用的确是阻止冒泡, 但却和事件的捕获阶段capture没啥关系.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("mpvue的事件")]),s("ul",[s("li",[this._v("没有wepy的这些坑, 一切都很vue.")]),s("li",[this._v("强制使用@, 如果要使用原生事件, 则无法绑定处理函数, 只能使用诸如capture-catch:touchmove这样不需要处理的事件. 原因应该是, 事件是绑定在vnode上的, 中间有一层代理, 写在vue构造参数对象顶层的自定义方法其实会被丢弃掉, 而不会加入page或component的构造对象.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("mpvue关于事件的一些下个版本会填掉的小坑(当前1.0.8)")]),s("ul",[s("li",[this._v("onShareAppMessage是每个page都有的, 写在源码里的无法去除.")]),s("li",[this._v("暂时不支持capture捕获阶段的事件.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"数据绑定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据绑定","aria-hidden":"true"}},[this._v("#")]),this._v(" 数据绑定")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("wepy的主打feature, 初衷是提供类似vue那样直接赋值来修改数据并更新视图, 避免原生提供的setData方式. 但很不幸...在异步流程里直接修改是无效的, 需要再手动调用"),s("code",[this._v("this.$apply()")]),this._v("以更新视图, 并且这样做会和setData起冲突, 使之前的修改无效.\n据我分析是wepy在实例初始化的时候深拷贝了一份初始data对象, 合并到实例对象下, 使得可以通过"),s("code",[this._v("this.abc")]),this._v("直接去访问数据(而非"),s("code",[this._v("this.data.abc")]),this._v("), 然后实际维护的是这份data, 在生命周期或事件方法中修改data后会自动setData更新真正被使用的数据及视图. 但在异步流程中修改无效, 可见并未如vue一样采用defineProperty绑定set描述符的方式.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("mpvue的数据绑定")]),s("ul",[s("li",[this._v("理所应当没有问题.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"问题根源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题根源","aria-hidden":"true"}},[this._v("#")]),this._v(" 问题根源")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("a",{attrs:{href:"https://github.com/Tencent/wepy/graphs/contributors",target:"_blank",rel:"noopener noreferrer"}},[this._v("核心贡献者数量太少了")]),this._v(", 几乎就是个从零开始的个人项目. 2月6号至今只更新了一个补丁版本. 应该是在憋大招.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"除以上对比之外mpvue的可赞之处"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#除以上对比之外mpvue的可赞之处","aria-hidden":"true"}},[this._v("#")]),this._v(" 除以上对比之外mpvue的可赞之处")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("文档里详细说明了"),e("strong",[t._v("什么不能做")]),t._v(", 各种地方都有"),e("strong",[t._v("踩坑注意")]),t._v(", 这点特别暖! 因为是脱胎自vue, 部分功能受限于小程序无法实现, 都会有一一说明. 光从文档这点就比wepy不知道高到哪里去了.")]),e("li",[t._v("app或页面参数options, 原生小程序只能从onLoad函数里获取, wepy对此未做工作. mpvue将其集成至根实例, 可以全局访问.")]),e("li",[t._v("现成的ide插件支持, vue全家桶的snippet和提示已经相当成熟. 小程序因为只有中国人才用所以...")]),e("li",[t._v("可以直接写html标签, 编译器会转译成对应小程序标签并带上类名, 这点对于小程序和web复用很重要.")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("标签转化")]),e("table",[e("thead",[e("tr",[e("th",[t._v("source")]),e("th",[t._v("target")])])]),e("tbody",[e("tr",[e("td",[e("code",[t._v("<div>")])]),e("td",[e("code",[t._v('<view class="_div">')])])]),e("tr",[e("td",[e("code",[t._v("<span>")])]),e("td",[e("code",[t._v('<label class="_span">')])])]),e("tr",[e("td",[e("code",[t._v("<a>")])]),e("td",[e("code",[t._v('<navigator class="_a">')])])]),e("tr",[e("td",[e("code",[t._v("<view>")])]),e("td",[e("code",[t._v('<view class="_view">')])])]),e("tr",[e("td",[e("code",[t._v("<custom-tag>")])]),e("td",[e("code",[t._v('<custom-tag class="_custom-tag">')])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"小程序本身的无法避免的坑点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序本身的无法避免的坑点","aria-hidden":"true"}},[this._v("#")]),this._v(" 小程序本身的无法避免的坑点")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"开发者工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发者工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 开发者工具")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("这个模拟器里最良心的可能是它的代码编辑器...")]),s("br"),this._v("\n这年头还用nwjs的都应该看看隔壁微软vs code...")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("不太稳定, 偶尔黑屏or白屏.")]),s("li",[this._v("特定时间经常连不上wx自家的服务器.")]),s("li",[this._v("莫名的模拟器专属真机没有的bug.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"明明能做好但就是不做好气死你系列"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#明明能做好但就是不做好气死你系列","aria-hidden":"true"}},[this._v("#")]),this._v(" 明明能做好但就是不做好气死你系列")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("双大括号里只能进行简单运算, 不能调用正常函数, 想用函数? wxs了解一下?")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("wxs")]),s("p",[this._v("这个东西是魔改阉割版es5. 不是跑在正常js环境里的, 目测是运行在原生渲染层, 因此和正常的js代码无法有任何互相作用.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("css选择器支持太孱弱了, 不支持属性选择器, 另外很多地方比如组件内都只能用简单的类选择器.")]),s("li",[this._v("image组件并不是html标准的img标签, 它不是图片本身而是图片的容器, 并且有默认宽高.")]),s("li",[this._v("不支持PATCH方法, 会静默失败. 用PUT替代.")]),s("li",[this._v("标签里的属性明明可以写数组, 动态类名挺有用的, 但文档里只字不提.")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("标签属性里写数组")]),e("p",[t._v("可以这样写,")]),e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("static {{[isActive ? "),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v("active"),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" : "),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v(", errorClass]}}"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),e("p",[t._v("甚至可以再套个[], 数组会被拍平.")]),e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("static {{[[isActive ? "),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v("active"),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" : "),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),e("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v("], errorClass]}}"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"跨平台统一性并不完善"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨平台统一性并不完善","aria-hidden":"true"}},[this._v("#")]),this._v(" 跨平台统一性并不完善")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("ios上还是基于wkwebkit, 因此ios8还是个坑, css要加前缀, js要转es5.")]),s("li",[this._v("原生控件的样式不统一, 如textarea的内边距, 如1px宽的线, 视觉差异显著.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"一些小程序底层的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一些小程序底层的问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 一些小程序底层的问题")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("map, canvas, video, textarea原生控件z-index高于一切, 甚至是调试器.")]),s("li",[this._v("安卓上图片链接不支持//自适应协议写法.")]),s("li",[this._v("体验版经常进去就无限转菊花, 开启调试模式就会好.")]),s("li",[this._v("dom节点的增删改功能缺失, 查也很弱, 只提供一些几何信息.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"迁移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#迁移","aria-hidden":"true"}},[this._v("#")]),this._v(" 迁移")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"迁移工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#迁移工作","aria-hidden":"true"}},[this._v("#")]),this._v(" 迁移工作")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("模板语法改写. 标签就不替换了, 主要数据绑定, 样式绑定, 事件和指令语法.")]),s("li",[this._v("状态管理要完全重写, 从wepy-redux到vuex.")]),s("li",[this._v("mpvue完全基于webpack构建(vue-cli模板), 因此需要自己配置插件并安装依赖, 如less-loader.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),s("p",[this._v("wepy提供的wx api的promisify和request并发限制可以使用"),s("a",{attrs:{href:"https://www.npmjs.com/package/common-mpvue",target:"_blank",rel:"noopener noreferrer"}},[this._v("common-mpvue")]),this._v("插件实现.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("构造器参数对象结构微调. 方法全部写到methods里, 也不再有events属性.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"迁移成本-米奇crm小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#迁移成本-米奇crm小程序","aria-hidden":"true"}},[this._v("#")]),this._v(" 迁移成本(米奇CRM小程序)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("重构周期. 保守预计五天.")]),s("li",[this._v("测试负担. 除了米妮应该都需要测一遍，保守预计测试＋修bug需要三天.")])])}],!1,null,null,null);s.default=i.exports}}]);